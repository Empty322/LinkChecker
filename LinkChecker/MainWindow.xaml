<Window x:Class="Link11Checker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Link11Checker" Height="500" Width="900">
    <DockPanel>
        <Menu DockPanel.Dock="Top" VerticalAlignment="Top" Grid.Row="0" Grid.ColumnSpan="2">
            <MenuItem Header="Сеанс">
                <MenuItem Header="Выбор папки для накопления" Command="{Binding SelectDestinationPath}"></MenuItem>
                <MenuItem Header="Добавить сеанс" Command="{Binding AddSeanse}"></MenuItem>
                <MenuItem Header="Добавить все сеансы" Command="{Binding AddAllSeanses}" IsEnabled="False"></MenuItem>
                <MenuItem Header="Удалить Сеанс" Command="{Binding RemoveSeanse}"></MenuItem>
                <MenuItem Header="Копировать сеансы" Command="{Binding CopySeanses}" IsEnabled="{Binding DestPathSelected}"></MenuItem>
                <MenuItem Header="Обновить сеансы" Command="{Binding UpdateSeanses}" ></MenuItem>
            </MenuItem>
            <MenuItem Header="Таймер">
                <MenuItem Header="Установить таймер на обновление сеансов" IsCheckable="True" IsChecked="{Binding UpdateTimerOn}"></MenuItem>
                <MenuItem Header="Установить таймер на копирование сеансов" IsCheckable="True" IsChecked="{Binding CopyTimerOn}" IsEnabled="{Binding DestPathSelected}"></MenuItem>
            </MenuItem>
            <MenuItem Header="Уведомления">
                <MenuItem Header="Начало работы" IsCheckable="True" IsChecked="{Binding NotifyWhenStartWorking}"></MenuItem>
                <MenuItem Header="Окончание работы" IsCheckable="True" IsEnabled="False"></MenuItem>
                <MenuItem Header="Переход в активный режим" IsCheckable="True" IsChecked="{Binding NotifyWhenStartActive}"></MenuItem>
                <MenuItem Header="Выход из активного режима" IsCheckable="True" IsEnabled="False"></MenuItem>
            </MenuItem>
        </Menu>
        <StatusBar DockPanel.Dock="Bottom" Margin="0, 5, 0, 0">
            <StatusBarItem>
                <TextBlock Text="{Binding WorkingCount, StringFormat=Работает: {0}}" />
            </StatusBarItem>
            <Separator></Separator>
            <StatusBarItem>
                <TextBlock Text="{Binding ActiveCount, StringFormat=Активных: {0}}" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="{Binding Version, StringFormat=Версия: {0}}" />
            </StatusBarItem>
        </StatusBar>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="315*"/>
                <ColumnDefinition Width="106*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="auto"></RowDefinition>
            </Grid.RowDefinitions>

            <DataGrid SelectionMode="Single" ItemsSource="{Binding Seanses}" Grid.Row="0" Grid.Column="0" SelectedItem ="{Binding SelectedSeanse}" AutoGenerateColumns="False" Margin="5" CanUserAddRows="False" CanUserDeleteRows="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Частота" Binding="{Binding Freq, Mode=OneWay}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Режим" Binding="{Binding Mode, Mode=OneWay}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Макс." Binding="{Binding MaxSize, Mode=OneWay}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Средн." Binding="{Binding AverageSize, Mode=OneWay}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Последн. раб." Binding="{Binding LastWorkingTime, Mode=OneWay}" Width="60"></DataGridTextColumn>
                    <DataGridTextColumn Header="Последн. акт." Binding="{Binding LastActiveTime, Mode=OneWay}" Width="60"></DataGridTextColumn>
                    <DataGridTextColumn Header="Кол. корреспондентов" Binding="{Binding AbonentsCount, Mode=OneWay}" Width="60"></DataGridTextColumn>
                    <DataGridTextColumn Header="Интервалы" Binding="{Binding Intervals, Mode=OneWay}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Координаты" Binding="{Binding Coordinates}"></DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
            <TabControl DataContext="{Binding SelectedSeanse}" Grid.Row="1" Grid.Column="0" Margin="5,5,5,0" VerticalAlignment="Top" Height="32">
                <TabItem Header="График расстройки">
                    <Grid Background="#FFE5E5E5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="47*"/>
                            <ColumnDefinition Width="152*"/>
                        </Grid.ColumnDefinitions>
                    </Grid>
                </TabItem>
                <TabItem Header="График работы">
                    <Grid Background="#FFE5E5E5"/>
                </TabItem>
            </TabControl>
            <StackPanel Grid.Row="0" Margin="5" Grid.Column="1">
                <Button Background="{Binding Path=State, Converter={StaticResource StateToColorConverter}}" Margin="0,0,0,10" Command="{Binding OpenLog}" IsEnabled="{Binding IsSeanceSelected}">Открыть log.txt</Button>
                <TextBlock Text="{Binding SelectedSeanse.LastUpdate, StringFormat=Посл. обновление: {0}}" TextWrapping="Wrap" />
                <TextBlock Text="{Binding SelectedSeanse.LastCopy, StringFormat=Посл. копирование: {0}}" TextWrapping="Wrap" />
                <TextBlock Text="{Binding SelectedSeanse.StartWorkingTime, StringFormat=Время начала: {0}}" TextWrapping="Wrap" />
                <TextBlock Text="{Binding SelectedSeanse.MaxSizeInBytes, StringFormat=Макс. объем в байтах: {0:F2}}" TextWrapping="Wrap" />
            </StackPanel>
        </Grid>
    </DockPanel>
</Window>
